"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = {
    id: 'meta-viewport-require',
    description: '<meta name="viewport"> with non-blank content must be present in <head> tag.',
    init(parser, reporter) {
        let headSeen = false;
        let metaViewportSeen = false;
        let metaViewportContent = '';
        let headEvent = null;
        const onTagStart = (event) => {
            const tagName = event.tagName.toLowerCase();
            if (tagName === 'head') {
                headSeen = true;
                headEvent = event;
            }
            else if (tagName === 'meta') {
                const mapAttrs = parser.getMapAttrs(event.attrs);
                if (mapAttrs['name'] && mapAttrs['name'].toLowerCase() === 'viewport') {
                    metaViewportSeen = true;
                    metaViewportContent = mapAttrs['content'] || '';
                }
            }
        };
        parser.addListener('tagstart', onTagStart);
        parser.addListener('end', () => {
            if (headSeen && headEvent) {
                if (!metaViewportSeen) {
                    reporter.error('<meta name="viewport"> must be present in <head> tag.', headEvent.line, headEvent.col, this, headEvent.raw);
                }
                else if (metaViewportContent.trim() === '') {
                    reporter.error('<meta name="viewport"> content attribute must not be empty.', headEvent.line, headEvent.col, this, headEvent.raw);
                }
            }
        });
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0YS12aWV3cG9ydC1yZXF1aXJlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvcmUvcnVsZXMvbWV0YS12aWV3cG9ydC1yZXF1aXJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBR0Esa0JBQWU7SUFDYixFQUFFLEVBQUUsdUJBQXVCO0lBQzNCLFdBQVcsRUFDVCw4RUFBOEU7SUFDaEYsSUFBSSxDQUFDLE1BQU0sRUFBRSxRQUFRO1FBQ25CLElBQUksUUFBUSxHQUFHLEtBQUssQ0FBQTtRQUNwQixJQUFJLGdCQUFnQixHQUFHLEtBQUssQ0FBQTtRQUM1QixJQUFJLG1CQUFtQixHQUFHLEVBQUUsQ0FBQTtRQUM1QixJQUFJLFNBQVMsR0FBaUIsSUFBSSxDQUFBO1FBRWxDLE1BQU0sVUFBVSxHQUFhLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDckMsTUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUMzQyxJQUFJLE9BQU8sS0FBSyxNQUFNLEVBQUU7Z0JBQ3RCLFFBQVEsR0FBRyxJQUFJLENBQUE7Z0JBQ2YsU0FBUyxHQUFHLEtBQUssQ0FBQTthQUNsQjtpQkFBTSxJQUFJLE9BQU8sS0FBSyxNQUFNLEVBQUU7Z0JBQzdCLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFBO2dCQUNoRCxJQUFJLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLEtBQUssVUFBVSxFQUFFO29CQUNyRSxnQkFBZ0IsR0FBRyxJQUFJLENBQUE7b0JBQ3ZCLG1CQUFtQixHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUE7aUJBQ2hEO2FBQ0Y7UUFDSCxDQUFDLENBQUE7UUFFRCxNQUFNLENBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQTtRQUMxQyxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUU7WUFDN0IsSUFBSSxRQUFRLElBQUksU0FBUyxFQUFFO2dCQUN6QixJQUFJLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ3JCLFFBQVEsQ0FBQyxLQUFLLENBQ1osdURBQXVELEVBQ3ZELFNBQVMsQ0FBQyxJQUFJLEVBQ2QsU0FBUyxDQUFDLEdBQUcsRUFDYixJQUFJLEVBQ0osU0FBUyxDQUFDLEdBQUcsQ0FDZCxDQUFBO2lCQUNGO3FCQUFNLElBQUksbUJBQW1CLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxFQUFFO29CQUM1QyxRQUFRLENBQUMsS0FBSyxDQUNaLDZEQUE2RCxFQUM3RCxTQUFTLENBQUMsSUFBSSxFQUNkLFNBQVMsQ0FBQyxHQUFHLEVBQ2IsSUFBSSxFQUNKLFNBQVMsQ0FBQyxHQUFHLENBQ2QsQ0FBQTtpQkFDRjthQUNGO1FBQ0gsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0NBQ00sQ0FBQSJ9